# Trading Rules

This directory contains standard implementations of common trading rules used to generate raw forecasts.

## Breakout (`breakout.py`)

The **Breakout** rule measures the current price's position relative to its recent range (high/low).

### Why is it a "Breakout"?

In technical analysis, a "breakout" occurs when a price moves outside a defined range of support or resistance. This strategy assumes that such a move signifies a shift in market sentiment and the beginning of a trend.

In this implementation:

- **Range Tracking**: It calculates the rolling maximum (`roll_max`) and minimum (`roll_min`) over a given `lookback` period (e.g., 20 days).
- **Positioning**: It calculates where the current price sits relative to the midpoint of that range:
  $$\text{signal} = 40.0 \times \frac{\text{price} - \text{midpoint}}{\text{max} - \text{min}}$$
- **Signaling**:
  - If the price is at the **20-day high**, the signal is **+20** (maximum bullish).
  - If the price is at the **20-day low**, the signal is **-20** (maximum bearish).
  - If the price is exactly at the midpoint, the signal is **0**.
- **Smoothing**: The raw signal is smoothed with an Exponential Moving Average (`smooth`) to reduce high-frequency noise and "whipsaws" (false breakouts).

## EWMAC (`ewmac.py`)

The **Exponentially Weighted Moving Average Crossover (EWMAC)** is the "workhorse" trend-following rule.

- **Dynamics**: It calculates the difference between a "fast" EWMA and a "slow" EWMA.
- **Normalization**: The raw difference is divided by price volatility. This ensures that the signal strength is comparable across different instruments and over time, regardless of how "volatile" the market current is.
- **Interpretation**: A positive values indicates the shorter-term trend is higher than the long-term trend (Bullish).

## Carry (`carry.py`)

The **Carry** rule captures the "income" generated by holding a position.

- In futures contexts, this is usually the "roll yield" (the difference between the price of the current contract and the next one).
- It is a "value" or "income" based strategy rather than a trend-based one.
